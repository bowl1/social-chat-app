"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
  var exports = {};
  exports.id = "app/api/auth/me/route";
  exports.ids = ["app/api/auth/me/route"];
  exports.modules = {
    /***/ "@prisma/client":
      /*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
      /***/ (module) => {
        module.exports = require("@prisma/client");

        /***/
      },

    /***/ "firebase-admin":
      /*!*********************************!*\
  !*** external "firebase-admin" ***!
  \*********************************/
      /***/ (module) => {
        module.exports = require("firebase-admin");

        /***/
      },

    /***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
      /*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
      /***/ (module) => {
        module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

        /***/
      },

    /***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
      /*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
      /***/ (module) => {
        module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

        /***/
      },

    /***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Fme%2Froute&page=%2Fapi%2Fauth%2Fme%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Fme%2Froute.ts&appDir=%2FUsers%2Flibowen%2Fgithub%2FSocialApp-Ghost%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Flibowen%2Fgithub%2FSocialApp-Ghost&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
      /*!*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Fme%2Froute&page=%2Fapi%2Fauth%2Fme%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Fme%2Froute.ts&appDir=%2FUsers%2Flibowen%2Fgithub%2FSocialApp-Ghost%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Flibowen%2Fgithub%2FSocialApp-Ghost&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
      /***/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
        eval(
          '__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ "(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ "(rsc)/./node_modules/next/dist/server/future/route-kind.js");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ "(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_libowen_github_SocialApp_Ghost_src_app_api_auth_me_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/auth/me/route.ts */ "(rsc)/./src/app/api/auth/me/route.ts");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = ""\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: "/api/auth/me/route",\n        pathname: "/api/auth/me",\n        filename: "route",\n        bundlePath: "app/api/auth/me/route"\n    },\n    resolvedPagePath: "/Users/libowen/github/SocialApp-Ghost/src/app/api/auth/me/route.ts",\n    nextConfigOutput,\n    userland: _Users_libowen_github_SocialApp_Ghost_src_app_api_auth_me_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we\'ve moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = "/api/auth/me/route";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhdXRoJTJGbWUlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmF1dGglMkZtZSUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmF1dGglMkZtZSUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmxpYm93ZW4lMkZnaXRodWIlMkZTb2NpYWxBcHAtR2hvc3QlMkZzcmMlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRlVzZXJzJTJGbGlib3dlbiUyRmdpdGh1YiUyRlNvY2lhbEFwcC1HaG9zdCZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDa0I7QUFDL0Y7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9teS1hcHAvP2EwOWQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL1VzZXJzL2xpYm93ZW4vZ2l0aHViL1NvY2lhbEFwcC1HaG9zdC9zcmMvYXBwL2FwaS9hdXRoL21lL3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9hdXRoL21lL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvYXV0aC9tZVwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvYXV0aC9tZS9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9Vc2Vycy9saWJvd2VuL2dpdGh1Yi9Tb2NpYWxBcHAtR2hvc3Qvc3JjL2FwcC9hcGkvYXV0aC9tZS9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvYXV0aC9tZS9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Fme%2Froute&page=%2Fapi%2Fauth%2Fme%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Fme%2Froute.ts&appDir=%2FUsers%2Flibowen%2Fgithub%2FSocialApp-Ghost%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Flibowen%2Fgithub%2FSocialApp-Ghost&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n',
        );

        /***/
      },

    /***/ "(rsc)/./src/app/api/auth/me/route.ts":
      /*!**************************************!*\
  !*** ./src/app/api/auth/me/route.ts ***!
  \**************************************/
      /***/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
        eval(
          '__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   dynamic: () => (/* binding */ dynamic)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ "(rsc)/./node_modules/next/dist/api/server.js");\n/* harmony import */ var _lib_server_prisma__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @lib/server/prisma */ "(rsc)/./src/lib/server/prisma.ts");\n/* harmony import */ var _lib_server_appApiUtils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @lib/server/appApiUtils */ "(rsc)/./src/lib/server/appApiUtils.ts");\n/* harmony import */ var _types_schemas__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @types/schemas */ "(rsc)/./src/types/schemas.ts");\n\n\n\n\nconst dynamic = "force-dynamic";\nasync function POST(req) {\n    const firebaseUser = await (0,_lib_server_appApiUtils__WEBPACK_IMPORTED_MODULE_2__.getAuthUser)(req);\n    if (!firebaseUser) return (0,_lib_server_appApiUtils__WEBPACK_IMPORTED_MODULE_2__.unauthorized)();\n    const body = await req.json();\n    const parsed = _types_schemas__WEBPACK_IMPORTED_MODULE_3__.authMeSchema.safeParse(body || {});\n    if (!parsed.success) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            message: parsed.error.flatten()\n        }, {\n            status: 400\n        });\n    }\n    const { username, avatar, gender, language, country, email: bodyEmail } = parsed.data;\n    const email = firebaseUser.email || bodyEmail;\n    if (!email) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n        message: "Email is required"\n    }, {\n        status: 400\n    });\n    await (0,_lib_server_appApiUtils__WEBPACK_IMPORTED_MODULE_2__.ensureDefaultGroup)();\n    const fallbackUsername = username || email.split("@")[0] || "user";\n    const user = await _lib_server_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.user.upsert({\n        where: {\n            firebaseUid: firebaseUser.uid\n        },\n        update: {\n            email,\n            username: username || fallbackUsername,\n            avatar,\n            gender,\n            language,\n            country\n        },\n        create: {\n            firebaseUid: firebaseUser.uid,\n            email,\n            username: fallbackUsername,\n            avatar,\n            gender,\n            language,\n            country\n        }\n    });\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n        user\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9hdXRoL21lL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUF3RDtBQUNaO0FBQzRDO0FBQzFDO0FBRXZDLE1BQU1NLFVBQVUsZ0JBQWdCO0FBRWhDLGVBQWVDLEtBQUtDLEdBQWdCO0lBQ3pDLE1BQU1DLGVBQWUsTUFBTU4sb0VBQVdBLENBQUNLO0lBQ3ZDLElBQUksQ0FBQ0MsY0FBYyxPQUFPTCxxRUFBWUE7SUFFdEMsTUFBTU0sT0FBTyxNQUFNRixJQUFJRyxJQUFJO0lBQzNCLE1BQU1DLFNBQVNQLHdEQUFZQSxDQUFDUSxTQUFTLENBQUNILFFBQVEsQ0FBQztJQUMvQyxJQUFJLENBQUNFLE9BQU9FLE9BQU8sRUFBRTtRQUNuQixPQUFPZCxxREFBWUEsQ0FBQ1csSUFBSSxDQUFDO1lBQUVJLFNBQVNILE9BQU9JLEtBQUssQ0FBQ0MsT0FBTztRQUFHLEdBQUc7WUFBRUMsUUFBUTtRQUFJO0lBQzlFO0lBRUEsTUFBTSxFQUFFQyxRQUFRLEVBQUVDLE1BQU0sRUFBRUMsTUFBTSxFQUFFQyxRQUFRLEVBQUVDLE9BQU8sRUFBRUMsT0FBT0MsU0FBUyxFQUFFLEdBQUdiLE9BQU9jLElBQUk7SUFDckYsTUFBTUYsUUFBUWYsYUFBYWUsS0FBSyxJQUFJQztJQUNwQyxJQUFJLENBQUNELE9BQU8sT0FBT3hCLHFEQUFZQSxDQUFDVyxJQUFJLENBQUM7UUFBRUksU0FBUztJQUFvQixHQUFHO1FBQUVHLFFBQVE7SUFBSTtJQUVyRixNQUFNaEIsMkVBQWtCQTtJQUV4QixNQUFNeUIsbUJBQW1CUixZQUFZSyxNQUFNSSxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUUsSUFBSTtJQUU1RCxNQUFNQyxPQUFPLE1BQU01QixzREFBTUEsQ0FBQzRCLElBQUksQ0FBQ0MsTUFBTSxDQUFDO1FBQ3BDQyxPQUFPO1lBQUVDLGFBQWF2QixhQUFhd0IsR0FBRztRQUFDO1FBQ3ZDQyxRQUFRO1lBQ05WO1lBQ0FMLFVBQVVBLFlBQVlRO1lBQ3RCUDtZQUNBQztZQUNBQztZQUNBQztRQUNGO1FBQ0FZLFFBQVE7WUFDTkgsYUFBYXZCLGFBQWF3QixHQUFHO1lBQzdCVDtZQUNBTCxVQUFVUTtZQUNWUDtZQUNBQztZQUNBQztZQUNBQztRQUNGO0lBQ0Y7SUFFQSxPQUFPdkIscURBQVlBLENBQUNXLElBQUksQ0FBQztRQUFFa0I7SUFBSztBQUNsQyIsInNvdXJjZXMiOlsid2VicGFjazovL215LWFwcC8uL3NyYy9hcHAvYXBpL2F1dGgvbWUvcm91dGUudHM/NThiZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvc2VydmVyXCI7XG5pbXBvcnQgeyBwcmlzbWEgfSBmcm9tIFwiQGxpYi9zZXJ2ZXIvcHJpc21hXCI7XG5pbXBvcnQgeyBlbnN1cmVEZWZhdWx0R3JvdXAsIGdldEF1dGhVc2VyLCB1bmF1dGhvcml6ZWQgfSBmcm9tIFwiQGxpYi9zZXJ2ZXIvYXBwQXBpVXRpbHNcIjtcbmltcG9ydCB7IGF1dGhNZVNjaGVtYSB9IGZyb20gXCJAdHlwZXMvc2NoZW1hc1wiO1xuXG5leHBvcnQgY29uc3QgZHluYW1pYyA9IFwiZm9yY2UtZHluYW1pY1wiO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXE6IE5leHRSZXF1ZXN0KSB7XG4gIGNvbnN0IGZpcmViYXNlVXNlciA9IGF3YWl0IGdldEF1dGhVc2VyKHJlcSk7XG4gIGlmICghZmlyZWJhc2VVc2VyKSByZXR1cm4gdW5hdXRob3JpemVkKCk7XG5cbiAgY29uc3QgYm9keSA9IGF3YWl0IHJlcS5qc29uKCk7XG4gIGNvbnN0IHBhcnNlZCA9IGF1dGhNZVNjaGVtYS5zYWZlUGFyc2UoYm9keSB8fCB7fSk7XG4gIGlmICghcGFyc2VkLnN1Y2Nlc3MpIHtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBtZXNzYWdlOiBwYXJzZWQuZXJyb3IuZmxhdHRlbigpIH0sIHsgc3RhdHVzOiA0MDAgfSk7XG4gIH1cblxuICBjb25zdCB7IHVzZXJuYW1lLCBhdmF0YXIsIGdlbmRlciwgbGFuZ3VhZ2UsIGNvdW50cnksIGVtYWlsOiBib2R5RW1haWwgfSA9IHBhcnNlZC5kYXRhO1xuICBjb25zdCBlbWFpbCA9IGZpcmViYXNlVXNlci5lbWFpbCB8fCBib2R5RW1haWw7XG4gIGlmICghZW1haWwpIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IG1lc3NhZ2U6IFwiRW1haWwgaXMgcmVxdWlyZWRcIiB9LCB7IHN0YXR1czogNDAwIH0pO1xuXG4gIGF3YWl0IGVuc3VyZURlZmF1bHRHcm91cCgpO1xuXG4gIGNvbnN0IGZhbGxiYWNrVXNlcm5hbWUgPSB1c2VybmFtZSB8fCBlbWFpbC5zcGxpdChcIkBcIilbMF0gfHwgXCJ1c2VyXCI7XG5cbiAgY29uc3QgdXNlciA9IGF3YWl0IHByaXNtYS51c2VyLnVwc2VydCh7XG4gICAgd2hlcmU6IHsgZmlyZWJhc2VVaWQ6IGZpcmViYXNlVXNlci51aWQgfSxcbiAgICB1cGRhdGU6IHtcbiAgICAgIGVtYWlsLFxuICAgICAgdXNlcm5hbWU6IHVzZXJuYW1lIHx8IGZhbGxiYWNrVXNlcm5hbWUsXG4gICAgICBhdmF0YXIsXG4gICAgICBnZW5kZXIsXG4gICAgICBsYW5ndWFnZSxcbiAgICAgIGNvdW50cnksXG4gICAgfSxcbiAgICBjcmVhdGU6IHtcbiAgICAgIGZpcmViYXNlVWlkOiBmaXJlYmFzZVVzZXIudWlkLFxuICAgICAgZW1haWwsXG4gICAgICB1c2VybmFtZTogZmFsbGJhY2tVc2VybmFtZSxcbiAgICAgIGF2YXRhcixcbiAgICAgIGdlbmRlcixcbiAgICAgIGxhbmd1YWdlLFxuICAgICAgY291bnRyeSxcbiAgICB9LFxuICB9KTtcblxuICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyB1c2VyIH0pO1xufVxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsInByaXNtYSIsImVuc3VyZURlZmF1bHRHcm91cCIsImdldEF1dGhVc2VyIiwidW5hdXRob3JpemVkIiwiYXV0aE1lU2NoZW1hIiwiZHluYW1pYyIsIlBPU1QiLCJyZXEiLCJmaXJlYmFzZVVzZXIiLCJib2R5IiwianNvbiIsInBhcnNlZCIsInNhZmVQYXJzZSIsInN1Y2Nlc3MiLCJtZXNzYWdlIiwiZXJyb3IiLCJmbGF0dGVuIiwic3RhdHVzIiwidXNlcm5hbWUiLCJhdmF0YXIiLCJnZW5kZXIiLCJsYW5ndWFnZSIsImNvdW50cnkiLCJlbWFpbCIsImJvZHlFbWFpbCIsImRhdGEiLCJmYWxsYmFja1VzZXJuYW1lIiwic3BsaXQiLCJ1c2VyIiwidXBzZXJ0Iiwid2hlcmUiLCJmaXJlYmFzZVVpZCIsInVpZCIsInVwZGF0ZSIsImNyZWF0ZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/auth/me/route.ts\n',
        );

        /***/
      },

    /***/ "(rsc)/./src/lib/server/appApiUtils.ts":
      /*!***************************************!*\
  !*** ./src/lib/server/appApiUtils.ts ***!
  \***************************************/
      /***/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
        eval(
          '__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DEFAULT_AVATAR: () => (/* binding */ DEFAULT_AVATAR),\n/* harmony export */   badRequest: () => (/* binding */ badRequest),\n/* harmony export */   ensureDefaultGroup: () => (/* binding */ ensureDefaultGroup),\n/* harmony export */   getAuthUser: () => (/* binding */ getAuthUser),\n/* harmony export */   mapComment: () => (/* binding */ mapComment),\n/* harmony export */   mapPost: () => (/* binding */ mapPost),\n/* harmony export */   unauthorized: () => (/* binding */ unauthorized)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ "(rsc)/./node_modules/next/dist/api/server.js");\n/* harmony import */ var _firebaseAdmin__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./firebaseAdmin */ "(rsc)/./src/lib/server/firebaseAdmin.ts");\n/* harmony import */ var _prisma__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./prisma */ "(rsc)/./src/lib/server/prisma.ts");\n\n\n\nconst DEFAULT_AVATAR = "/default-avatar.png";\nconst getAuthUser = async (req)=>{\n    const header = req.headers.get("authorization");\n    if (!header || !header.startsWith("Bearer ")) return null;\n    const token = header.replace("Bearer ", "");\n    try {\n        const decoded = await _firebaseAdmin__WEBPACK_IMPORTED_MODULE_1__.admin.auth().verifyIdToken(token);\n        return decoded;\n    } catch (error) {\n        console.error("Auth error", error);\n        return null;\n    }\n};\nconst ensureDefaultGroup = async ()=>{\n    await _prisma__WEBPACK_IMPORTED_MODULE_2__.prisma.group.upsert({\n        where: {\n            id: "group-just-talk"\n        },\n        update: {\n            isDefault: true,\n            name: "just want to talk"\n        },\n        create: {\n            id: "group-just-talk",\n            name: "just want to talk",\n            isDefault: true\n        }\n    });\n    await _prisma__WEBPACK_IMPORTED_MODULE_2__.prisma.group.upsert({\n        where: {\n            id: "group-sleepless"\n        },\n        update: {\n            isDefault: false,\n            name: "sleepless night"\n        },\n        create: {\n            id: "group-sleepless",\n            name: "sleepless night",\n            isDefault: false\n        }\n    });\n    await _prisma__WEBPACK_IMPORTED_MODULE_2__.prisma.group.upsert({\n        where: {\n            id: "group-vulnerable"\n        },\n        update: {\n            isDefault: false,\n            name: "It\'s okay to be vulnerable"\n        },\n        create: {\n            id: "group-vulnerable",\n            name: "It\'s okay to be vulnerable",\n            isDefault: false\n        }\n    });\n};\nconst mapPost = (post)=>({\n        objectId: post.id,\n        userName: post.author ? post.author.username : "Unknown",\n        userAvatar: post.author?.avatar || DEFAULT_AVATAR,\n        content: post.content || {},\n        group: post.groupId,\n        likes: (post.likes || []).map((l)=>l.userId)\n    });\nconst mapComment = (comment)=>({\n        id: comment.id,\n        author: comment.author.username,\n        avatar: comment.author.avatar || DEFAULT_AVATAR,\n        content: comment.content,\n        parentId: comment.parentId\n    });\nconst unauthorized = ()=>next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n        message: "Unauthorized"\n    }, {\n        status: 401\n    });\nconst badRequest = (message)=>next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n        message\n    }, {\n        status: 400\n    });\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3NlcnZlci9hcHBBcGlVdGlscy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQXdEO0FBQ2hCO0FBQ047QUFHM0IsTUFBTUcsaUJBQWlCLHNCQUFzQjtBQUU3QyxNQUFNQyxjQUFjLE9BQU9DO0lBQ2hDLE1BQU1DLFNBQVNELElBQUlFLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDO0lBQy9CLElBQUksQ0FBQ0YsVUFBVSxDQUFDQSxPQUFPRyxVQUFVLENBQUMsWUFBWSxPQUFPO0lBQ3JELE1BQU1DLFFBQVFKLE9BQU9LLE9BQU8sQ0FBQyxXQUFXO0lBQ3hDLElBQUk7UUFDRixNQUFNQyxVQUFVLE1BQU1YLGlEQUFLQSxDQUFDWSxJQUFJLEdBQUdDLGFBQWEsQ0FBQ0o7UUFDakQsT0FBT0U7SUFDVCxFQUFFLE9BQU9HLE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLGNBQWNBO1FBQzVCLE9BQU87SUFDVDtBQUNGLEVBQUU7QUFFSyxNQUFNRSxxQkFBcUI7SUFDaEMsTUFBTWYsMkNBQU1BLENBQUNnQixLQUFLLENBQUNDLE1BQU0sQ0FBQztRQUN4QkMsT0FBTztZQUFFQyxJQUFJO1FBQWtCO1FBQy9CQyxRQUFRO1lBQUVDLFdBQVc7WUFBTUMsTUFBTTtRQUFvQjtRQUNyREMsUUFBUTtZQUNOSixJQUFJO1lBQ0pHLE1BQU07WUFDTkQsV0FBVztRQUNiO0lBQ0Y7SUFFQSxNQUFNckIsMkNBQU1BLENBQUNnQixLQUFLLENBQUNDLE1BQU0sQ0FBQztRQUN4QkMsT0FBTztZQUFFQyxJQUFJO1FBQWtCO1FBQy9CQyxRQUFRO1lBQUVDLFdBQVc7WUFBT0MsTUFBTTtRQUFrQjtRQUNwREMsUUFBUTtZQUNOSixJQUFJO1lBQ0pHLE1BQU07WUFDTkQsV0FBVztRQUNiO0lBQ0Y7SUFFQSxNQUFNckIsMkNBQU1BLENBQUNnQixLQUFLLENBQUNDLE1BQU0sQ0FBQztRQUN4QkMsT0FBTztZQUFFQyxJQUFJO1FBQW1CO1FBQ2hDQyxRQUFRO1lBQUVDLFdBQVc7WUFBT0MsTUFBTTtRQUE2QjtRQUMvREMsUUFBUTtZQUNOSixJQUFJO1lBQ0pHLE1BQU07WUFDTkQsV0FBVztRQUNiO0lBQ0Y7QUFDRixFQUFFO0FBRUssTUFBTUcsVUFBVSxDQUNyQkMsT0FHSTtRQUNKQyxVQUFVRCxLQUFLTixFQUFFO1FBQ2pCUSxVQUFVRixLQUFLRyxNQUFNLEdBQUdILEtBQUtHLE1BQU0sQ0FBQ0MsUUFBUSxHQUFHO1FBQy9DQyxZQUFZTCxLQUFLRyxNQUFNLEVBQUVHLFVBQVU5QjtRQUNuQytCLFNBQVMsS0FBY0EsT0FBTyxJQUFJLENBQUM7UUFDbkNoQixPQUFPUyxLQUFLUSxPQUFPO1FBQ25CQyxPQUFPLENBQUNULEtBQUtTLEtBQUssSUFBSSxFQUFFLEVBQUVDLEdBQUcsQ0FBQyxDQUFDQyxJQUFNQSxFQUFFQyxNQUFNO0lBQy9DLEdBQUc7QUFFSSxNQUFNQyxhQUFhLENBQUNDLFVBQXlDO1FBQ2xFcEIsSUFBSW9CLFFBQVFwQixFQUFFO1FBQ2RTLFFBQVFXLFFBQVFYLE1BQU0sQ0FBQ0MsUUFBUTtRQUMvQkUsUUFBUVEsUUFBUVgsTUFBTSxDQUFDRyxNQUFNLElBQUk5QjtRQUNqQytCLFNBQVMsUUFBaUJBLE9BQU87UUFDakNRLFVBQVVELFFBQVFDLFFBQVE7SUFDNUIsR0FBRztBQUVJLE1BQU1DLGVBQWUsSUFBTTNDLHFEQUFZQSxDQUFDNEMsSUFBSSxDQUFDO1FBQUVDLFNBQVM7SUFBZSxHQUFHO1FBQUVDLFFBQVE7SUFBSSxHQUFHO0FBRTNGLE1BQU1DLGFBQWEsQ0FBQ0YsVUFBaUI3QyxxREFBWUEsQ0FBQzRDLElBQUksQ0FBQztRQUFFQztJQUFRLEdBQUc7UUFBRUMsUUFBUTtJQUFJLEdBQUciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9teS1hcHAvLi9zcmMvbGliL3NlcnZlci9hcHBBcGlVdGlscy50cz82NzVkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tIFwibmV4dC9zZXJ2ZXJcIjtcbmltcG9ydCB7IGFkbWluIH0gZnJvbSBcIi4vZmlyZWJhc2VBZG1pblwiO1xuaW1wb3J0IHsgcHJpc21hIH0gZnJvbSBcIi4vcHJpc21hXCI7XG5pbXBvcnQgeyBDb21tZW50LCBQb3N0LCBQb3N0TGlrZSwgVXNlciB9IGZyb20gXCJAcHJpc21hL2NsaWVudFwiO1xuXG5leHBvcnQgY29uc3QgREVGQVVMVF9BVkFUQVIgPSBcIi9kZWZhdWx0LWF2YXRhci5wbmdcIjtcblxuZXhwb3J0IGNvbnN0IGdldEF1dGhVc2VyID0gYXN5bmMgKHJlcTogTmV4dFJlcXVlc3QpID0+IHtcbiAgY29uc3QgaGVhZGVyID0gcmVxLmhlYWRlcnMuZ2V0KFwiYXV0aG9yaXphdGlvblwiKTtcbiAgaWYgKCFoZWFkZXIgfHwgIWhlYWRlci5zdGFydHNXaXRoKFwiQmVhcmVyIFwiKSkgcmV0dXJuIG51bGw7XG4gIGNvbnN0IHRva2VuID0gaGVhZGVyLnJlcGxhY2UoXCJCZWFyZXIgXCIsIFwiXCIpO1xuICB0cnkge1xuICAgIGNvbnN0IGRlY29kZWQgPSBhd2FpdCBhZG1pbi5hdXRoKCkudmVyaWZ5SWRUb2tlbih0b2tlbik7XG4gICAgcmV0dXJuIGRlY29kZWQ7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkF1dGggZXJyb3JcIiwgZXJyb3IpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgZW5zdXJlRGVmYXVsdEdyb3VwID0gYXN5bmMgKCkgPT4ge1xuICBhd2FpdCBwcmlzbWEuZ3JvdXAudXBzZXJ0KHtcbiAgICB3aGVyZTogeyBpZDogXCJncm91cC1qdXN0LXRhbGtcIiB9LFxuICAgIHVwZGF0ZTogeyBpc0RlZmF1bHQ6IHRydWUsIG5hbWU6IFwianVzdCB3YW50IHRvIHRhbGtcIiB9LFxuICAgIGNyZWF0ZToge1xuICAgICAgaWQ6IFwiZ3JvdXAtanVzdC10YWxrXCIsXG4gICAgICBuYW1lOiBcImp1c3Qgd2FudCB0byB0YWxrXCIsXG4gICAgICBpc0RlZmF1bHQ6IHRydWUsXG4gICAgfSxcbiAgfSk7XG5cbiAgYXdhaXQgcHJpc21hLmdyb3VwLnVwc2VydCh7XG4gICAgd2hlcmU6IHsgaWQ6IFwiZ3JvdXAtc2xlZXBsZXNzXCIgfSxcbiAgICB1cGRhdGU6IHsgaXNEZWZhdWx0OiBmYWxzZSwgbmFtZTogXCJzbGVlcGxlc3MgbmlnaHRcIiB9LFxuICAgIGNyZWF0ZToge1xuICAgICAgaWQ6IFwiZ3JvdXAtc2xlZXBsZXNzXCIsXG4gICAgICBuYW1lOiBcInNsZWVwbGVzcyBuaWdodFwiLFxuICAgICAgaXNEZWZhdWx0OiBmYWxzZSxcbiAgICB9LFxuICB9KTtcblxuICBhd2FpdCBwcmlzbWEuZ3JvdXAudXBzZXJ0KHtcbiAgICB3aGVyZTogeyBpZDogXCJncm91cC12dWxuZXJhYmxlXCIgfSxcbiAgICB1cGRhdGU6IHsgaXNEZWZhdWx0OiBmYWxzZSwgbmFtZTogXCJJdCdzIG9rYXkgdG8gYmUgdnVsbmVyYWJsZVwiIH0sXG4gICAgY3JlYXRlOiB7XG4gICAgICBpZDogXCJncm91cC12dWxuZXJhYmxlXCIsXG4gICAgICBuYW1lOiBcIkl0J3Mgb2theSB0byBiZSB2dWxuZXJhYmxlXCIsXG4gICAgICBpc0RlZmF1bHQ6IGZhbHNlLFxuICAgIH0sXG4gIH0pO1xufTtcblxuZXhwb3J0IGNvbnN0IG1hcFBvc3QgPSAoXG4gIHBvc3Q6XG4gICAgfCAoUG9zdCAmIHsgYXV0aG9yOiBVc2VyOyBsaWtlczogUG9zdExpa2VbXSB9KVxuICAgIHwgKFBvc3QgJiB7IGF1dGhvcj86IFVzZXI7IGxpa2VzPzogUG9zdExpa2VbXSB9KSxcbikgPT4gKHtcbiAgb2JqZWN0SWQ6IHBvc3QuaWQsXG4gIHVzZXJOYW1lOiBwb3N0LmF1dGhvciA/IHBvc3QuYXV0aG9yLnVzZXJuYW1lIDogXCJVbmtub3duXCIsXG4gIHVzZXJBdmF0YXI6IHBvc3QuYXV0aG9yPy5hdmF0YXIgfHwgREVGQVVMVF9BVkFUQVIsXG4gIGNvbnRlbnQ6IChwb3N0IGFzIGFueSkuY29udGVudCB8fCB7fSxcbiAgZ3JvdXA6IHBvc3QuZ3JvdXBJZCxcbiAgbGlrZXM6IChwb3N0Lmxpa2VzIHx8IFtdKS5tYXAoKGwpID0+IGwudXNlcklkKSxcbn0pO1xuXG5leHBvcnQgY29uc3QgbWFwQ29tbWVudCA9IChjb21tZW50OiBDb21tZW50ICYgeyBhdXRob3I6IFVzZXIgfSkgPT4gKHtcbiAgaWQ6IGNvbW1lbnQuaWQsXG4gIGF1dGhvcjogY29tbWVudC5hdXRob3IudXNlcm5hbWUsXG4gIGF2YXRhcjogY29tbWVudC5hdXRob3IuYXZhdGFyIHx8IERFRkFVTFRfQVZBVEFSLFxuICBjb250ZW50OiAoY29tbWVudCBhcyBhbnkpLmNvbnRlbnQsXG4gIHBhcmVudElkOiBjb21tZW50LnBhcmVudElkLFxufSk7XG5cbmV4cG9ydCBjb25zdCB1bmF1dGhvcml6ZWQgPSAoKSA9PiBOZXh0UmVzcG9uc2UuanNvbih7IG1lc3NhZ2U6IFwiVW5hdXRob3JpemVkXCIgfSwgeyBzdGF0dXM6IDQwMSB9KTtcblxuZXhwb3J0IGNvbnN0IGJhZFJlcXVlc3QgPSAobWVzc2FnZTogYW55KSA9PiBOZXh0UmVzcG9uc2UuanNvbih7IG1lc3NhZ2UgfSwgeyBzdGF0dXM6IDQwMCB9KTtcbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJhZG1pbiIsInByaXNtYSIsIkRFRkFVTFRfQVZBVEFSIiwiZ2V0QXV0aFVzZXIiLCJyZXEiLCJoZWFkZXIiLCJoZWFkZXJzIiwiZ2V0Iiwic3RhcnRzV2l0aCIsInRva2VuIiwicmVwbGFjZSIsImRlY29kZWQiLCJhdXRoIiwidmVyaWZ5SWRUb2tlbiIsImVycm9yIiwiY29uc29sZSIsImVuc3VyZURlZmF1bHRHcm91cCIsImdyb3VwIiwidXBzZXJ0Iiwid2hlcmUiLCJpZCIsInVwZGF0ZSIsImlzRGVmYXVsdCIsIm5hbWUiLCJjcmVhdGUiLCJtYXBQb3N0IiwicG9zdCIsIm9iamVjdElkIiwidXNlck5hbWUiLCJhdXRob3IiLCJ1c2VybmFtZSIsInVzZXJBdmF0YXIiLCJhdmF0YXIiLCJjb250ZW50IiwiZ3JvdXBJZCIsImxpa2VzIiwibWFwIiwibCIsInVzZXJJZCIsIm1hcENvbW1lbnQiLCJjb21tZW50IiwicGFyZW50SWQiLCJ1bmF1dGhvcml6ZWQiLCJqc29uIiwibWVzc2FnZSIsInN0YXR1cyIsImJhZFJlcXVlc3QiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/server/appApiUtils.ts\n',
        );

        /***/
      },

    /***/ "(rsc)/./src/lib/server/firebaseAdmin.ts":
      /*!*****************************************!*\
  !*** ./src/lib/server/firebaseAdmin.ts ***!
  \*****************************************/
      /***/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
        eval(
          '__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   admin: () => (/* reexport default from dynamic */ firebase_admin__WEBPACK_IMPORTED_MODULE_0___default.a)\n/* harmony export */ });\n/* harmony import */ var firebase_admin__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! firebase-admin */ "firebase-admin");\n/* harmony import */ var firebase_admin__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(firebase_admin__WEBPACK_IMPORTED_MODULE_0__);\n\nconst serviceAccountJson = process.env.FIREBASE_SERVICE_ACCOUNT;\nif (!(firebase_admin__WEBPACK_IMPORTED_MODULE_0___default().apps).length) {\n    if (serviceAccountJson) {\n        firebase_admin__WEBPACK_IMPORTED_MODULE_0___default().initializeApp({\n            credential: firebase_admin__WEBPACK_IMPORTED_MODULE_0___default().credential.cert(JSON.parse(serviceAccountJson))\n        });\n    } else {\n        firebase_admin__WEBPACK_IMPORTED_MODULE_0___default().initializeApp();\n    }\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3NlcnZlci9maXJlYmFzZUFkbWluLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFtQztBQUVuQyxNQUFNQyxxQkFBcUJDLFFBQVFDLEdBQUcsQ0FBQ0Msd0JBQXdCO0FBRS9ELElBQUksQ0FBQ0osNERBQVUsQ0FBQ00sTUFBTSxFQUFFO0lBQ3RCLElBQUlMLG9CQUFvQjtRQUN0QkQsbUVBQW1CLENBQUM7WUFDbEJRLFlBQVlSLGdFQUFnQixDQUFDUyxJQUFJLENBQUNDLEtBQUtDLEtBQUssQ0FBQ1Y7UUFDL0M7SUFDRixPQUFPO1FBQ0xELG1FQUFtQjtJQUNyQjtBQUNGO0FBRWlCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbXktYXBwLy4vc3JjL2xpYi9zZXJ2ZXIvZmlyZWJhc2VBZG1pbi50cz9jZTA1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBhZG1pbiBmcm9tIFwiZmlyZWJhc2UtYWRtaW5cIjtcblxuY29uc3Qgc2VydmljZUFjY291bnRKc29uID0gcHJvY2Vzcy5lbnYuRklSRUJBU0VfU0VSVklDRV9BQ0NPVU5UO1xuXG5pZiAoIWFkbWluLmFwcHMubGVuZ3RoKSB7XG4gIGlmIChzZXJ2aWNlQWNjb3VudEpzb24pIHtcbiAgICBhZG1pbi5pbml0aWFsaXplQXBwKHtcbiAgICAgIGNyZWRlbnRpYWw6IGFkbWluLmNyZWRlbnRpYWwuY2VydChKU09OLnBhcnNlKHNlcnZpY2VBY2NvdW50SnNvbikpLFxuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIGFkbWluLmluaXRpYWxpemVBcHAoKTtcbiAgfVxufVxuXG5leHBvcnQgeyBhZG1pbiB9O1xuIl0sIm5hbWVzIjpbImFkbWluIiwic2VydmljZUFjY291bnRKc29uIiwicHJvY2VzcyIsImVudiIsIkZJUkVCQVNFX1NFUlZJQ0VfQUNDT1VOVCIsImFwcHMiLCJsZW5ndGgiLCJpbml0aWFsaXplQXBwIiwiY3JlZGVudGlhbCIsImNlcnQiLCJKU09OIiwicGFyc2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/server/firebaseAdmin.ts\n',
        );

        /***/
      },

    /***/ "(rsc)/./src/lib/server/prisma.ts":
      /*!**********************************!*\
  !*** ./src/lib/server/prisma.ts ***!
  \**********************************/
      /***/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
        eval(
          '__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ "@prisma/client");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst globalForPrisma = global;\nconst prisma = globalForPrisma.prisma || new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient({\n    log: [\n        "error",\n        "warn"\n    ]\n});\nif (true) {\n    globalForPrisma.prisma = prisma;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3NlcnZlci9wcmlzbWEudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQThDO0FBRTlDLE1BQU1DLGtCQUFrQkM7QUFFakIsTUFBTUMsU0FDWEYsZ0JBQWdCRSxNQUFNLElBQ3RCLElBQUlILHdEQUFZQSxDQUFDO0lBQ2ZJLEtBQUs7UUFBQztRQUFTO0tBQU87QUFDeEIsR0FBRztBQUVMLElBQUlDLElBQXFDLEVBQUU7SUFDekNKLGdCQUFnQkUsTUFBTSxHQUFHQTtBQUMzQiIsInNvdXJjZXMiOlsid2VicGFjazovL215LWFwcC8uL3NyYy9saWIvc2VydmVyL3ByaXNtYS50cz9hMDU1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFByaXNtYUNsaWVudCB9IGZyb20gXCJAcHJpc21hL2NsaWVudFwiO1xuXG5jb25zdCBnbG9iYWxGb3JQcmlzbWEgPSBnbG9iYWwgYXMgdW5rbm93biBhcyB7IHByaXNtYT86IFByaXNtYUNsaWVudCB9O1xuXG5leHBvcnQgY29uc3QgcHJpc21hID1cbiAgZ2xvYmFsRm9yUHJpc21hLnByaXNtYSB8fFxuICBuZXcgUHJpc21hQ2xpZW50KHtcbiAgICBsb2c6IFtcImVycm9yXCIsIFwid2FyblwiXSxcbiAgfSk7XG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIHtcbiAgZ2xvYmFsRm9yUHJpc21hLnByaXNtYSA9IHByaXNtYTtcbn1cbiJdLCJuYW1lcyI6WyJQcmlzbWFDbGllbnQiLCJnbG9iYWxGb3JQcmlzbWEiLCJnbG9iYWwiLCJwcmlzbWEiLCJsb2ciLCJwcm9jZXNzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/server/prisma.ts\n',
        );

        /***/
      },

    /***/ "(rsc)/./src/types/schemas.ts":
      /*!******************************!*\
  !*** ./src/types/schemas.ts ***!
  \******************************/
      /***/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
        eval(
          '__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authMeSchema: () => (/* binding */ authMeSchema),\n/* harmony export */   commentCreateSchema: () => (/* binding */ commentCreateSchema),\n/* harmony export */   contentSchema: () => (/* binding */ contentSchema),\n/* harmony export */   postCreateSchema: () => (/* binding */ postCreateSchema),\n/* harmony export */   userUpdateSchema: () => (/* binding */ userUpdateSchema)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ "(rsc)/./node_modules/zod/v3/types.js");\n\nconst contentSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n    text: zod__WEBPACK_IMPORTED_MODULE_0__.string().max(2000).optional().nullable(),\n    imageUrl: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional().nullable().refine((v)=>!v || v.startsWith("http") || v.startsWith("/"), "Invalid image url"),\n    videoUrl: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional().nullable().refine((v)=>!v || v.startsWith("http") || v.startsWith("/"), "Invalid video url")\n});\nconst postCreateSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n    content: contentSchema.default({}),\n    groupId: zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1, "groupId is required")\n});\nconst commentCreateSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n    content: zod__WEBPACK_IMPORTED_MODULE_0__.any(),\n    postId: zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1, "postId is required"),\n    groupId: zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1, "groupId is required"),\n    parentId: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional().nullable()\n});\nconst authMeSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n    username: zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1).optional(),\n    email: zod__WEBPACK_IMPORTED_MODULE_0__.string().email().optional(),\n    avatar: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional().nullable().refine((v)=>!v || v.startsWith("http") || v.startsWith("/"), "Invalid url"),\n    gender: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    language: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    country: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional()\n});\nconst userUpdateSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n    username: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    gender: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    language: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    country: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    avatar: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional().nullable().refine((v)=>!v || v.startsWith("http") || v.startsWith("/"), "Invalid url")\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvdHlwZXMvc2NoZW1hcy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBd0I7QUFFakIsTUFBTUMsZ0JBQWdCRCx1Q0FBUSxDQUFDO0lBQ3BDRyxNQUFNSCx1Q0FBUSxHQUFHSyxHQUFHLENBQUMsTUFBTUMsUUFBUSxHQUFHQyxRQUFRO0lBQzlDQyxVQUFVUix1Q0FDRCxHQUNOTSxRQUFRLEdBQ1JDLFFBQVEsR0FDUkUsTUFBTSxDQUFDLENBQUNDLElBQU0sQ0FBQ0EsS0FBS0EsRUFBRUMsVUFBVSxDQUFDLFdBQVdELEVBQUVDLFVBQVUsQ0FBQyxNQUFNO0lBQ2xFQyxVQUFVWix1Q0FDRCxHQUNOTSxRQUFRLEdBQ1JDLFFBQVEsR0FDUkUsTUFBTSxDQUFDLENBQUNDLElBQU0sQ0FBQ0EsS0FBS0EsRUFBRUMsVUFBVSxDQUFDLFdBQVdELEVBQUVDLFVBQVUsQ0FBQyxNQUFNO0FBQ3BFLEdBQUc7QUFFSSxNQUFNRSxtQkFBbUJiLHVDQUFRLENBQUM7SUFDdkNjLFNBQVNiLGNBQWNjLE9BQU8sQ0FBQyxDQUFDO0lBQ2hDQyxTQUFTaEIsdUNBQVEsR0FBR2lCLEdBQUcsQ0FBQyxHQUFHO0FBQzdCLEdBQUc7QUFFSSxNQUFNQyxzQkFBc0JsQix1Q0FBUSxDQUFDO0lBQzFDYyxTQUFTZCxvQ0FBSztJQUNkb0IsUUFBUXBCLHVDQUFRLEdBQUdpQixHQUFHLENBQUMsR0FBRztJQUMxQkQsU0FBU2hCLHVDQUFRLEdBQUdpQixHQUFHLENBQUMsR0FBRztJQUMzQkksVUFBVXJCLHVDQUFRLEdBQUdNLFFBQVEsR0FBR0MsUUFBUTtBQUMxQyxHQUFHO0FBRUksTUFBTWUsZUFBZXRCLHVDQUFRLENBQUM7SUFDbkN1QixVQUFVdkIsdUNBQVEsR0FBR2lCLEdBQUcsQ0FBQyxHQUFHWCxRQUFRO0lBQ3BDa0IsT0FBT3hCLHVDQUFRLEdBQUd3QixLQUFLLEdBQUdsQixRQUFRO0lBQ2xDbUIsUUFBUXpCLHVDQUNDLEdBQ05NLFFBQVEsR0FDUkMsUUFBUSxHQUNSRSxNQUFNLENBQUMsQ0FBQ0MsSUFBTSxDQUFDQSxLQUFLQSxFQUFFQyxVQUFVLENBQUMsV0FBV0QsRUFBRUMsVUFBVSxDQUFDLE1BQU07SUFDbEVlLFFBQVExQix1Q0FBUSxHQUFHTSxRQUFRO0lBQzNCcUIsVUFBVTNCLHVDQUFRLEdBQUdNLFFBQVE7SUFDN0JzQixTQUFTNUIsdUNBQVEsR0FBR00sUUFBUTtBQUM5QixHQUFHO0FBRUksTUFBTXVCLG1CQUFtQjdCLHVDQUFRLENBQUM7SUFDdkN1QixVQUFVdkIsdUNBQVEsR0FBR00sUUFBUTtJQUM3Qm9CLFFBQVExQix1Q0FBUSxHQUFHTSxRQUFRO0lBQzNCcUIsVUFBVTNCLHVDQUFRLEdBQUdNLFFBQVE7SUFDN0JzQixTQUFTNUIsdUNBQVEsR0FBR00sUUFBUTtJQUM1Qm1CLFFBQVF6Qix1Q0FDQyxHQUNOTSxRQUFRLEdBQ1JDLFFBQVEsR0FDUkUsTUFBTSxDQUFDLENBQUNDLElBQU0sQ0FBQ0EsS0FBS0EsRUFBRUMsVUFBVSxDQUFDLFdBQVdELEVBQUVDLFVBQVUsQ0FBQyxNQUFNO0FBQ3BFLEdBQUciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9teS1hcHAvLi9zcmMvdHlwZXMvc2NoZW1hcy50cz83OTlkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHogfSBmcm9tIFwiem9kXCI7XG5cbmV4cG9ydCBjb25zdCBjb250ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICB0ZXh0OiB6LnN0cmluZygpLm1heCgyMDAwKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gIGltYWdlVXJsOiB6XG4gICAgLnN0cmluZygpXG4gICAgLm9wdGlvbmFsKClcbiAgICAubnVsbGFibGUoKVxuICAgIC5yZWZpbmUoKHYpID0+ICF2IHx8IHYuc3RhcnRzV2l0aChcImh0dHBcIikgfHwgdi5zdGFydHNXaXRoKFwiL1wiKSwgXCJJbnZhbGlkIGltYWdlIHVybFwiKSxcbiAgdmlkZW9Vcmw6IHpcbiAgICAuc3RyaW5nKClcbiAgICAub3B0aW9uYWwoKVxuICAgIC5udWxsYWJsZSgpXG4gICAgLnJlZmluZSgodikgPT4gIXYgfHwgdi5zdGFydHNXaXRoKFwiaHR0cFwiKSB8fCB2LnN0YXJ0c1dpdGgoXCIvXCIpLCBcIkludmFsaWQgdmlkZW8gdXJsXCIpLFxufSk7XG5cbmV4cG9ydCBjb25zdCBwb3N0Q3JlYXRlU2NoZW1hID0gei5vYmplY3Qoe1xuICBjb250ZW50OiBjb250ZW50U2NoZW1hLmRlZmF1bHQoe30pLFxuICBncm91cElkOiB6LnN0cmluZygpLm1pbigxLCBcImdyb3VwSWQgaXMgcmVxdWlyZWRcIiksXG59KTtcblxuZXhwb3J0IGNvbnN0IGNvbW1lbnRDcmVhdGVTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIGNvbnRlbnQ6IHouYW55KCksXG4gIHBvc3RJZDogei5zdHJpbmcoKS5taW4oMSwgXCJwb3N0SWQgaXMgcmVxdWlyZWRcIiksXG4gIGdyb3VwSWQ6IHouc3RyaW5nKCkubWluKDEsIFwiZ3JvdXBJZCBpcyByZXF1aXJlZFwiKSxcbiAgcGFyZW50SWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxufSk7XG5cbmV4cG9ydCBjb25zdCBhdXRoTWVTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIHVzZXJuYW1lOiB6LnN0cmluZygpLm1pbigxKS5vcHRpb25hbCgpLFxuICBlbWFpbDogei5zdHJpbmcoKS5lbWFpbCgpLm9wdGlvbmFsKCksXG4gIGF2YXRhcjogelxuICAgIC5zdHJpbmcoKVxuICAgIC5vcHRpb25hbCgpXG4gICAgLm51bGxhYmxlKClcbiAgICAucmVmaW5lKCh2KSA9PiAhdiB8fCB2LnN0YXJ0c1dpdGgoXCJodHRwXCIpIHx8IHYuc3RhcnRzV2l0aChcIi9cIiksIFwiSW52YWxpZCB1cmxcIiksXG4gIGdlbmRlcjogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICBsYW5ndWFnZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICBjb3VudHJ5OiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG59KTtcblxuZXhwb3J0IGNvbnN0IHVzZXJVcGRhdGVTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIHVzZXJuYW1lOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gIGdlbmRlcjogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICBsYW5ndWFnZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICBjb3VudHJ5OiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gIGF2YXRhcjogelxuICAgIC5zdHJpbmcoKVxuICAgIC5vcHRpb25hbCgpXG4gICAgLm51bGxhYmxlKClcbiAgICAucmVmaW5lKCh2KSA9PiAhdiB8fCB2LnN0YXJ0c1dpdGgoXCJodHRwXCIpIHx8IHYuc3RhcnRzV2l0aChcIi9cIiksIFwiSW52YWxpZCB1cmxcIiksXG59KTtcbiJdLCJuYW1lcyI6WyJ6IiwiY29udGVudFNjaGVtYSIsIm9iamVjdCIsInRleHQiLCJzdHJpbmciLCJtYXgiLCJvcHRpb25hbCIsIm51bGxhYmxlIiwiaW1hZ2VVcmwiLCJyZWZpbmUiLCJ2Iiwic3RhcnRzV2l0aCIsInZpZGVvVXJsIiwicG9zdENyZWF0ZVNjaGVtYSIsImNvbnRlbnQiLCJkZWZhdWx0IiwiZ3JvdXBJZCIsIm1pbiIsImNvbW1lbnRDcmVhdGVTY2hlbWEiLCJhbnkiLCJwb3N0SWQiLCJwYXJlbnRJZCIsImF1dGhNZVNjaGVtYSIsInVzZXJuYW1lIiwiZW1haWwiLCJhdmF0YXIiLCJnZW5kZXIiLCJsYW5ndWFnZSIsImNvdW50cnkiLCJ1c2VyVXBkYXRlU2NoZW1hIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/types/schemas.ts\n',
        );

        /***/
      },
  };
  // load runtime
  var __webpack_require__ = require("../../../../webpack-runtime.js");
  __webpack_require__.C(exports);
  var __webpack_exec__ = (moduleId) => __webpack_require__((__webpack_require__.s = moduleId));
  var __webpack_exports__ = __webpack_require__.X(
    0,
    ["vendor-chunks/next", "vendor-chunks/@opentelemetry", "vendor-chunks/zod"],
    () =>
      __webpack_exec__(
        "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Fme%2Froute&page=%2Fapi%2Fauth%2Fme%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Fme%2Froute.ts&appDir=%2FUsers%2Flibowen%2Fgithub%2FSocialApp-Ghost%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Flibowen%2Fgithub%2FSocialApp-Ghost&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!",
      ),
  );
  module.exports = __webpack_exports__;
})();
